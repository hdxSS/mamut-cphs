(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52683,e=>{"use strict";e.s(["default",()=>i],52683);var a=e.i(43476),t=e.i(71645);function s(e){var s;let{tabs:l}=e,[r,n]=(0,t.useState)((null==(s=l[0])?void 0:s.id)||"");return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex -mb-px",children:l.map(e=>(0,a.jsx)("button",{onClick:()=>n(e.id),className:"\n                py-4 px-6 text-sm font-medium border-b-2 transition-colors\n                ".concat(r===e.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n              "),children:e.label},e.id))})}),(0,a.jsx)("div",{className:"py-6",children:l.map(e=>(0,a.jsx)("div",{className:r===e.id?"block":"hidden",children:e.component},e.id))})]})}let l="mamut_cphs_investigaciones",r={generateId:()=>{let e=Date.now(),a=Math.floor(1e4*Math.random());return"INV-".concat(e,"-").concat(a)},save:e=>{let a=r.getAll();a.push(e),localStorage.setItem(l,JSON.stringify(a))},getAll:()=>{let e=localStorage.getItem(l);return e?JSON.parse(e):[]},search:(e,a)=>{let t=r.getAll(),s=e.toLowerCase().trim();return t.filter(e=>e[a].toLowerCase().includes(s))},getById:e=>r.getAll().find(a=>a.id===e),exportToCSV:e=>{let a=[e.id,e.nombre,e.edad,e.area,e.antiguedad,e.fecha,'"'.concat(e.declaracionAccidente.replace(/"/g,'""'),'"')];return"".concat("ID,Nombre,Edad,Área,Antigüedad,Fecha,Declaración de Accidente","\n").concat(a.join(","))},downloadCSV:e=>{let a=new Blob([r.exportToCSV(e)],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),s=URL.createObjectURL(a);t.setAttribute("href",s),t.setAttribute("download","investigacion_".concat(e.id,".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}};function n(e){let{isOpen:s,onClose:l,onSelect:n}=e,[d,i]=(0,t.useState)("nombre"),[c,o]=(0,t.useState)(""),[m,x]=(0,t.useState)([]);if(!s)return null;let u=()=>{c.trim()&&x(r.search(c,d))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Consultar Folio"}),(0,a.jsx)("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Buscar por:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"nombre",checked:"nombre"===d,onChange:e=>i(e.target.value),className:"mr-2"}),"Nombre"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",value:"id",checked:"id"===d,onChange:e=>i(e.target.value),className:"mr-2"}),"ID"]})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:c,onChange:e=>o(e.target.value),onKeyPress:e=>"Enter"===e.key&&u(),placeholder:"Buscar por ".concat(d,"..."),className:"w-full border border-gray-300 rounded px-3 py-2"})}),(0,a.jsx)("button",{onClick:u,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Buscar"}),m.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-2",children:["Resultados (",m.length,"):"]}),(0,a.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,a.jsxs)("div",{onClick:()=>{n(e),l(),o(""),x([])},className:"p-3 border border-gray-200 rounded hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-semibold",children:e.nombre}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["ID: ",e.id]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Fecha: ",e.fecha]})]},e.id))})]}),c&&0===m.length&&(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No se encontraron resultados"})]})]})})}function d(){let[e,s]=(0,t.useState)({id:"",nombre:"",edad:"",area:"",antiguedad:"",declaracionAccidente:"",fecha:new Date().toISOString().split("T")[0]}),[l,d]=(0,t.useState)(!1),[i,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{s(e=>({...e,id:r.generateId()}))},[]);let o=e=>{let{name:a,value:t}=e.target;s(e=>({...e,[a]:t}))};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded",children:"¡Investigación guardada exitosamente!"}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Investigación"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Folio: ",e.id]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>d(!0),className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:"Consultar Folio"})]}),(0,a.jsxs)("form",{onSubmit:a=>{a.preventDefault(),r.save(e),r.downloadCSV(e),c(!0),setTimeout(()=>c(!1),3e3),s({id:r.generateId(),nombre:"",edad:"",area:"",antiguedad:"",declaracionAccidente:"",fecha:new Date().toISOString().split("T")[0]})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Fecha *"}),(0,a.jsx)("input",{type:"date",name:"fecha",value:e.fecha,onChange:o,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre *"}),(0,a.jsx)("input",{type:"text",name:"nombre",value:e.nombre,onChange:o,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Edad *"}),(0,a.jsx)("input",{type:"text",name:"edad",value:e.edad,onChange:o,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Área *"}),(0,a.jsx)("input",{type:"text",name:"area",value:e.area,onChange:o,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Antigüedad *"}),(0,a.jsx)("input",{type:"text",name:"antiguedad",value:e.antiguedad,onChange:o,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Declaración de Accidente *"}),(0,a.jsx)("textarea",{name:"declaracionAccidente",value:e.declaracionAccidente,onChange:o,required:!0,rows:6,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 px-4 rounded hover:bg-blue-700 font-semibold",children:"Grabar"})]})]}),(0,a.jsx)(n,{isOpen:l,onClose:()=>d(!1),onSelect:e=>{s(e)}})]})}function i(){let e=[{id:"investigaciones",label:"Investigaciones",component:(0,a.jsx)(d,{})}];return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-blue-600 text-white shadow-lg",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Mamut CPHS"}),(0,a.jsx)("p",{className:"text-sm text-blue-100",children:"Sistema de Gestión de Investigaciones"})]})}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-6",children:(0,a.jsx)(s,{tabs:e})})]})}}]);